import{r as v,o as Z,a as r,s as $,c as i,b as e,t as a,d as w,w as m,e as p,v as c,m as B,F as f,f as x,h as u,p as q,l as I}from"./index-D-JfudNM.js";const U={class:"w-full flex flex-col py-5"},T={class:"flex justify-between gap-4"},N={class:"flex gap-2"},_={key:0},E={key:1},z={class:""},j={class:"h-full w-full bg-base-100 shadow-lg rounded-2xl mt-5 flex flex-col gap-10 px-10 py-5"},F={id:"add_assignment",class:"modal"},O={class:"modal-box"},R=["value"],Y={id:"update_assignment",class:"modal"},G={class:"modal-box"},J={id:"del_assignment",class:"modal"},K={class:"modal-box"},P={class:"overflow-x-auto"},Q={class:"table"},W=["checked","onChange"],X={class:"flex flex-col"},tt={key:0,class:"badge badge-error py-5 text-xs"},et={class:"flex gap-3"},lt=["onClick"],st=["onClick"],nt={__name:"AssignmentView",props:["isSidebarOpen"],emits:["toggleSidebar"],setup(h,{emit:y}){const d=v([]),b=v([]),o=v({title:null,details:null,date:null,courseId:null}),n=v({title:null,details:null,date:null}),L=s=>{var t;n.value=s,(t=document.querySelector("#update_assignment"))==null||t.showModal()},V=s=>{var t;n.value=s,(t=document.querySelector("#del_assignment"))==null||t.showModal()};Z(async()=>{await r.get("/assignments").then(s=>{s.data.forEach(t=>{t.date=t.date.split("T")[0]}),d.value=s.data}).catch(s=>console.log(s));try{const[s,t]=await $.all([r.get("/course"),r.get("/assignments")]);b.value=s.data,t.value=t.data}catch(s){console.error(s)}});const M=async()=>{await r.post("/assignments",o.value).then(s=>{var t;d.value.push(s.data),o.value.title=null,o.value.details=null,o.value.date=null,o.value.courseId=null,(t=document.querySelector("#add_assignment"))==null||t.close()}).catch(s=>console.log(s))},C=async()=>{await r.patch(`/assignments/${n.value.id}`,n.value).then(s=>{var l;console.log(s);const t=d.value.findIndex(g=>g.id===n.value.id);t!==-1&&(d.value[t]={...d.value[t],...n.value}),o.value.title=null,o.value.details=null,o.value.date=null,(l=document.querySelector("#update_assignment"))==null||l.close()}).catch(s=>console.log(s))},H=async()=>{await r.delete(`/assignments/${n.value.id}`).then(s=>{var t;d.value=d.value.filter(l=>l.id!==n.value.id),o.value.title=null,o.value.details=null,o.value.date=null,(t=document.querySelector("#del_assignment"))==null||t.close()}).catch(s=>console.log(s))},k=async s=>{await r.post(`/assignments/${s}`).catch(t=>console.log(t))},A=v(localStorage.getItem("username")||"N/A"),D=h,S=y;return(s,t)=>(u(),i("div",U,[e("div",T,[e("div",N,[e("button",{class:"bg-primary text-zinc-50 p-2 rounded-full px-3 shadow-md z-40",onClick:t[0]||(t[0]=l=>S("toggleSidebar"))},[D.isSidebarOpen?(u(),i("span",_,t[11]||(t[11]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M4.83582 12L11.0429 18.2071L12.4571 16.7929L7.66424 12L12.4571 7.20712L11.0429 5.79291L4.83582 12ZM10.4857 12L16.6928 18.2071L18.107 16.7929L13.3141 12L18.107 7.20712L16.6928 5.79291L10.4857 12Z"})],-1)]))):(u(),i("span",E,t[12]||(t[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M19.1642 12L12.9571 5.79291L11.5429 7.20712L16.3358 12L11.5429 16.7929L12.9571 18.2071L19.1642 12ZM13.5143 12L7.30722 5.79291L5.89301 7.20712L10.6859 12L5.89301 16.7929L7.30722 18.2071L13.5143 12Z"})],-1)])))]),t[13]||(t[13]=e("h1",{class:"font-brand text-4xl text-slate-900"},"Schkoul",-1))]),e("span",z,a(A.value),1)]),e("div",j,[t[26]||(t[26]=e("div",{class:"flex justify-between flex-col md:flex-row gap-2 items-start"},[e("h2",{class:"text-3xl font-bold"},"Due Assignments"),e("button",{class:"btn btn-primary",onclick:"add_assignment.showModal()"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 fill-base-100",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"})]),w(" Add Assignment ")])],-1)),e("dialog",F,[e("div",O,[t[16]||(t[16]=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),t[17]||(t[17]=e("h3",{class:"text-lg font-bold mb-5"},"Add New Assignment",-1)),e("form",{onSubmit:t[5]||(t[5]=m(l=>M(),["prevent"])),class:"flex flex-col gap-5"},[p(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>o.value.title=l),placeholder:"Title",class:"input w-full"},null,512),[[c,o.value.title]]),p(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>o.value.details=l),placeholder:"Details",class:"input w-full"},null,512),[[c,o.value.details]]),p(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=l=>o.value.date=l),placeholder:"Date",class:"input w-full"},null,512),[[c,o.value.date]]),p(e("select",{class:"select w-full","onUpdate:modelValue":t[4]||(t[4]=l=>o.value.courseId=l)},[t[14]||(t[14]=e("option",{value:null},"Select course",-1)),(u(!0),i(f,null,x(b.value,l=>(u(),i("option",{key:l.id,value:l.id},a(l.code)+": "+a(l.title),9,R))),128))],512),[[B,o.value.courseId]]),t[15]||(t[15]=e("button",{class:"btn btn-primary",type:"submit"},"Add Assignment",-1))],32)])]),e("dialog",Y,[e("div",G,[t[19]||(t[19]=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),t[20]||(t[20]=e("h3",{class:"text-lg font-bold mb-5"},"Edit Assignment",-1)),e("form",{onSubmit:t[9]||(t[9]=m(l=>C(),["prevent"])),class:"flex flex-col gap-5"},[p(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=l=>n.value.title=l),placeholder:"Title",class:"input w-full"},null,512),[[c,n.value.title]]),p(e("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=l=>n.value.details=l),placeholder:"Details",class:"input w-full"},null,512),[[c,n.value.details]]),p(e("input",{type:"date","onUpdate:modelValue":t[8]||(t[8]=l=>n.value.date=l),placeholder:"Date",class:"input w-full"},null,512),[[c,n.value.date]]),t[18]||(t[18]=e("button",{class:"btn btn-primary",type:"submit"},"Save Changes",-1))],32)])]),e("dialog",J,[e("div",K,[t[21]||(t[21]=e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),t[22]||(t[22]=e("h3",{class:"text-lg font-bold mb-5"},"Delete Assignment",-1)),e("p",null," Are you sure you want to permanently delete assignment "+a(n.value.title)+" ? ",1),e("button",{class:"btn btn-error",onClick:t[10]||(t[10]=m(l=>H(),["prevent"]))},"Yes Delete")])]),e("div",P,[e("table",Q,[t[25]||(t[25]=e("thead",null,[e("tr",null,[e("th"),e("th",null,"Title"),e("th",null,"Course"),e("th",null,"Due Date"),e("th",null,"Actions")])],-1)),e("tbody",null,[(u(!0),i(f,null,x(d.value,l=>(u(),i("tr",{class:q(["hover:bg-base-300",{"line-through":l.done}]),key:l.id},[e("th",null,[e("input",{type:"checkbox",checked:l.done==!0,onChange:()=>{l.done=!l.done,k(l.id)},class:"checkbox"},null,40,W)]),e("td",null,a(l.title),1),e("td",null,a(l.course.code)+": "+a(l.course.title),1),e("td",X,[w(a(new Date(l.date).toDateString())+" ",1),Math.ceil((new Date(l.date)-new Date)/(1e3*60*60*24))<3?(u(),i("div",tt,a(Math.ceil((new Date(l.date)-new Date)/(1e3*60*60*24)))+" days remaining ",1)):I("",!0)]),e("td",null,[e("div",et,[e("button",{class:"btn btn-square btn-accent btn-sm",onClick:g=>L(l)},t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 fill-base-100",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89H6.41421L15.7279 9.57627ZM17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785L17.1421 8.16206ZM7.24264 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L7.24264 20.89Z"})],-1)]),8,lt),e("button",{class:"btn btn-square btn-sm btn-error",onClick:g=>V(l)},t[24]||(t[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 fill-base-100",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"})],-1)]),8,st)])])],2))),128))])])])])]))}};export{nt as default};
