import{r as b,o as A,a as v,s as D,c as r,b as t,t as n,d as f,w as g,e as u,v as d,m as Z,F as x,f as y,h as p,l as U}from"./index-D-JfudNM.js";const B={class:"w-full flex flex-col py-5"},T={class:"flex justify-between gap-4"},$={class:"flex gap-2"},I={key:0},N={key:1},O={class:""},Q={class:"h-full w-full bg-base-100 shadow-lg rounded-2xl mt-5 flex flex-col gap-10 px-10 py-5"},E={id:"add_quiz",class:"modal"},j={class:"modal-box"},F=["value"],R={id:"update_quiz",class:"modal"},Y={class:"modal-box"},G={id:"del_quiz",class:"modal"},J={class:"modal-box"},K={class:"overflow-x-auto"},P={class:"table"},W={class:"flex flex-col"},X={key:0,class:"badge badge-error py-5"},_={class:"flex gap-3"},ll=["onClick"],tl=["onClick"],sl={__name:"QuizView",props:["isSidebarOpen"],emits:["toggleSidebar"],setup(h,{emit:M}){const i=b([]),w=b([]),a=b({title:null,syllabus:null,date:null,courseId:null,marksAchieved:null,totalMarks:null}),o=b({id:null,title:null,syllabus:null,date:null,marksAchieved:null,totalMarks:null}),V=s=>{var l;o.value=s,(l=document.querySelector("#update_quiz"))==null||l.showModal()},k=s=>{var l;o.value=s,(l=document.querySelector("#del_quiz"))==null||l.showModal()},c=s=>Math.ceil((new Date(s)-new Date)/(1e3*60*60*24));A(async()=>{await v.get("/quiz").then(s=>{s.data.forEach(l=>{l.date=l.date.split("T")[0]}),i.value=s.data}).catch(s=>console.log(s));try{const[s,l]=await D.all([v.get("/course"),v.get("/quiz")]);w.value=s.data,l.value=l.data}catch(s){console.error(s)}});const L=async()=>{await v.post("/quiz",a.value).then(s=>{var l;i.value.push(s.data),o.value.title=null,o.value.details=null,o.value.date=null,o.value.courseId=null,(l=document.querySelector("#add_quiz"))==null||l.close()}).catch(s=>console.log(s))},H=async()=>{await v.patch(`/quiz/${o.value.id}`,o.value).then(s=>{var e;console.log(s);const l=i.value.findIndex(m=>m.id===o.value.id);l!==-1&&(i.value[l]={...i.value[l],...o.value}),o.value={id:null,title:null,syllabus:null,date:null,marksAchieved:null,totalMarks:null},(e=document.querySelector("#update_quiz"))==null||e.close()}).catch(s=>console.log(s))},z=async()=>{await v.delete(`/quiz/${o.value.id}`).then(s=>{var l;i.value=i.value.filter(e=>e.id!==o.value.id),o.value={id:null,title:null,syllabus:null,date:null,marksAchieved:null,totalMarks:null},(l=document.querySelector("#del_quiz"))==null||l.close()}).catch(s=>console.log(s))},q=b(localStorage.getItem("username")||"N/A"),C=h,S=M;return(s,l)=>(p(),r("div",B,[t("div",T,[t("div",$,[t("button",{class:"bg-primary text-zinc-50 p-2 rounded-full px-3 shadow-md z-40",onClick:l[0]||(l[0]=e=>S("toggleSidebar"))},[C.isSidebarOpen?(p(),r("span",I,l[14]||(l[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M4.83582 12L11.0429 18.2071L12.4571 16.7929L7.66424 12L12.4571 7.20712L11.0429 5.79291L4.83582 12ZM10.4857 12L16.6928 18.2071L18.107 16.7929L13.3141 12L18.107 7.20712L16.6928 5.79291L10.4857 12Z"})],-1)]))):(p(),r("span",N,l[15]||(l[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-4",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M19.1642 12L12.9571 5.79291L11.5429 7.20712L16.3358 12L11.5429 16.7929L12.9571 18.2071L19.1642 12ZM13.5143 12L7.30722 5.79291L5.89301 7.20712L10.6859 12L5.89301 16.7929L7.30722 18.2071L13.5143 12Z"})],-1)])))]),l[16]||(l[16]=t("h1",{class:"font-brand text-4xl text-slate-900"},"Schkoul",-1))]),t("span",O,n(q.value),1)]),t("div",Q,[l[29]||(l[29]=t("div",{class:"flex justify-between"},[t("h2",{class:"text-3xl font-bold"},"Quizzes"),t("button",{class:"btn btn-primary",onclick:"add_quiz.showModal()"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 fill-base-100",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M11 11V5H13V11H19V13H13V19H11V13H5V11H11Z"})]),f(" Add quiz ")])],-1)),t("dialog",E,[t("div",j,[l[19]||(l[19]=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),l[20]||(l[20]=t("h3",{class:"text-lg font-bold mb-5"},"Add New quiz",-1)),t("form",{onSubmit:l[6]||(l[6]=g(e=>L(),["prevent"])),class:"flex flex-col gap-5"},[u(t("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=e=>a.value.title=e),placeholder:"Title",class:"input w-full"},null,512),[[d,a.value.title]]),u(t("select",{class:"select w-full","onUpdate:modelValue":l[2]||(l[2]=e=>a.value.courseId=e)},[l[17]||(l[17]=t("option",{value:null},"Select course",-1)),(p(!0),r(x,null,y(w.value,e=>(p(),r("option",{key:e.id,value:e.id},n(e.code)+": "+n(e.title),9,F))),128))],512),[[Z,a.value.courseId]]),u(t("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=e=>a.value.syllabus=e),placeholder:"Syllabus",class:"input w-full"},null,512),[[d,a.value.syllabus]]),u(t("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>a.value.totalMarks=e),placeholder:"Total Marks (Optional)",class:"input w-full"},null,512),[[d,a.value.totalMarks]]),u(t("input",{type:"date","onUpdate:modelValue":l[5]||(l[5]=e=>a.value.date=e),placeholder:"Date",class:"input w-full"},null,512),[[d,a.value.date]]),l[18]||(l[18]=t("button",{class:"btn btn-primary",type:"submit"},"Add Quiz",-1))],32)])]),t("dialog",R,[t("div",Y,[l[22]||(l[22]=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),l[23]||(l[23]=t("h3",{class:"text-lg font-bold mb-5"},"Edit Quiz",-1)),t("form",{onSubmit:l[12]||(l[12]=g(e=>H(),["prevent"])),class:"flex flex-col gap-5"},[u(t("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=e=>o.value.title=e),placeholder:"Title",class:"input w-full"},null,512),[[d,o.value.title]]),u(t("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=e=>o.value.syllabus=e),placeholder:"Syllabus",class:"input w-full"},null,512),[[d,o.value.syllabus]]),u(t("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=e=>o.value.marksAchieved=e),placeholder:"Marks Achieved (Optional)",class:"input w-full"},null,512),[[d,o.value.marksAchieved]]),u(t("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=e=>o.value.totalMarks=e),placeholder:"Total Marks (Optional)",class:"input w-full"},null,512),[[d,o.value.totalMarks]]),u(t("input",{type:"date","onUpdate:modelValue":l[11]||(l[11]=e=>o.value.date=e),placeholder:"Date",class:"input w-full"},null,512),[[d,o.value.date]]),l[21]||(l[21]=t("button",{class:"btn btn-primary",type:"submit"},"Save Changes",-1))],32)])]),t("dialog",G,[t("div",J,[l[24]||(l[24]=t("form",{method:"dialog"},[t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")],-1)),l[25]||(l[25]=t("h3",{class:"text-lg font-bold mb-5"},"Delete Quiz",-1)),t("p",null,"Are you sure you want to permanently delete quiz "+n(o.value.title)+" ?",1),t("button",{class:"btn btn-error",onClick:l[13]||(l[13]=g(e=>z(),["prevent"]))},"Yes Delete")])]),t("div",K,[t("table",P,[l[28]||(l[28]=t("thead",null,[t("tr",null,[t("th",null,"Title"),t("th",null,"Course"),t("th",null,"Marks"),t("th",null,"Date"),t("th",null,"Actions")])],-1)),t("tbody",null,[(p(!0),r(x,null,y(i.value,e=>(p(),r("tr",{class:"hover:bg-base-300",key:e.id},[t("td",null,n(e.title),1),t("td",null,n(e.course.code)+": "+n(e.course.title),1),t("td",null,n(e.marksAchieved)+" / "+n(e.totalMarks),1),t("td",W,[f(n(new Date(e.date).toDateString())+" ",1),c(e.date)>=0&&c(e.date)<3?(p(),r("div",X,n(c(e.date))+" days remaining ",1)):U("",!0)]),t("td",null,[t("div",_,[t("button",{class:"btn btn-square btn-accent btn-sm",onClick:m=>V(e)},l[26]||(l[26]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 fill-base-100",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M15.7279 9.57627L14.3137 8.16206L5 17.4758V18.89H6.41421L15.7279 9.57627ZM17.1421 8.16206L18.5563 6.74785L17.1421 5.33363L15.7279 6.74785L17.1421 8.16206ZM7.24264 20.89H3V16.6473L16.435 3.21231C16.8256 2.82179 17.4587 2.82179 17.8492 3.21231L20.6777 6.04074C21.0682 6.43126 21.0682 7.06443 20.6777 7.45495L7.24264 20.89Z"})],-1)]),8,ll),t("button",{class:"btn btn-square btn-sm btn-error",onClick:m=>k(e)},l[27]||(l[27]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 fill-base-100",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{d:"M17 6H22V8H20V21C20 21.5523 19.5523 22 19 22H5C4.44772 22 4 21.5523 4 21V8H2V6H7V3C7 2.44772 7.44772 2 8 2H16C16.5523 2 17 2.44772 17 3V6ZM18 8H6V20H18V8ZM9 11H11V17H9V11ZM13 11H15V17H13V11ZM9 4V6H15V4H9Z"})],-1)]),8,tl)])])]))),128))])])])])]))}};export{sl as default};
